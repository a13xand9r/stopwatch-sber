{"version":3,"sources":["components/AppHeader.tsx","store/store.ts","context/storeContext.ts","hooks/useStore.ts","components/StopWatch.tsx","hooks/useStopWatch.ts","App.tsx","assistant/assistant.ts","context/assistantContext.ts","components/providers/AssistantProvider.tsx","components/GlobalStyle.tsx","components/providers/StoreProvider.tsx","components/providers/Providers.tsx","index.tsx"],"names":["AppHeader","Header","back","title","initialState","character","ms","s","m","h","isGoing","reducer","state","action","type","characterId","payload","actions","StoreContext","React","createContext","useStore","useContext","FlexContainer","styled","div","TimeContainer","StopWatchContainer","StyledButton","Button","StopWatch","memo","dispatch","interval","useRef","msRef","sRef","mRef","hRef","current","console","log","useEffect","clearInterval","setInterval","startStopWatch","pauseStopWatch","resetStopWatch","useStopWatch","isAnyTime","Boolean","Body","style","fontSize","view","text","onClick","App","Container","initializeAssistant","getState","createAssistant","AssistantContext","AssistantProvider","children","assistantRef","stateRef","assistant","on","smart_app_data","id","initAssistant","Provider","value","themes","sber","createGlobalStyle","darkSber","eva","darkEva","joy","darkJoy","DocumentStyle","background","gradient","GlobalStyles","Theme","useMemo","StoreProvider","useReducer","Providers","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c1302d5e.chunk.js","sourcesContent":["import { Header } from '@sberdevices/plasma-ui'\r\n\r\nexport const AppHeader = () => {\r\n\r\n  return (\r\n    <Header\r\n      back={false}\r\n      title={'Мой секундомер'}\r\n    />\r\n  )\r\n}","import { ActionsType, CharacterType, StateType } from '../types/types'\r\n\r\n\r\nexport const initialState = {\r\n    character: 'sber' as CharacterType,\r\n    ms: 0,\r\n    s: 0,\r\n    m: 0,\r\n    h: 0,\r\n    isGoing: false,\r\n}\r\n\r\nexport const reducer = (state: StateType, action: ActionsType): StateType => {\r\n    switch (action.type) {\r\n        case 'SET_CHARACTER':\r\n            return { ...state, character: action.characterId }\r\n        case 'SET_H':\r\n            return { ...state, h: action.payload }\r\n        case 'SET_M':\r\n            return { ...state, m: action.payload }\r\n        case 'SET_MS':\r\n            return { ...state, ms: action.payload }\r\n        case 'SET_S':\r\n            return { ...state, s: action.payload }\r\n        case 'START_STOP_WATCH':\r\n            return { ...state, isGoing: true }\r\n        case 'STOP_STOP_WATCH':\r\n            return { ...state, isGoing: false }\r\n        case 'CLEAR_TIMER':\r\n            return { ...state, ms: 0, s: 0, m: 0, h: 0 }\r\n        default: return state\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    setCharacter: (characterId: CharacterType) => ({ type: 'SET_CHARACTER', characterId } as const),\r\n    setm: (payload: number) => ({ type: 'SET_M', payload } as const),\r\n    setms: (payload: number) => ({ type: 'SET_MS', payload } as const),\r\n    sets: (payload: number) => ({ type: 'SET_S', payload } as const),\r\n    seth: (payload: number) => ({ type: 'SET_H', payload } as const),\r\n    clearTimer: () => ({ type: 'CLEAR_TIMER' } as const),\r\n    startStopWatch: () => ({ type: 'START_STOP_WATCH' } as const),\r\n    stopStopWatch: () => ({ type: 'STOP_STOP_WATCH' } as const),\r\n}","import { StateType, ActionsType } from './../types/types'\r\nimport React, { Dispatch } from 'react'\r\nimport { initialState } from '../store/store'\r\n\r\nexport const StoreContext = React.createContext<[StateType, Dispatch<ActionsType>]>([\r\n  initialState,\r\n  () => null\r\n])","import { useContext } from 'react'\r\nimport { StoreContext } from '../context/storeContext'\r\n\r\nexport const useStore = () => {\r\n  return useContext(StoreContext)\r\n}","import { Body1, Button } from '@sberdevices/plasma-ui'\r\nimport React, { useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport { useAssistant } from '../hooks/useAssistant'\r\nimport { useStopWatch } from '../hooks/useStopWatch'\r\n\r\nconst FlexContainer = styled.div`\r\n    display: flex;\r\n    justify-content: space-around;\r\n    /* width: 35rem; */\r\n    margin: auto;\r\n    margin-bottom: 3rem;\r\n`\r\n\r\nconst TimeContainer = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background-color: #006eff4b;\r\n    border-radius: 0.8rem;\r\n    width: 4rem;\r\n    height: 5rem;\r\n`\r\n\r\nconst StopWatchContainer = styled.div`\r\n    width: 500px;\r\n    margin: 5rem auto;\r\n    text-align: center;\r\n    @media (max-width: 650px) {\r\n        width: 300px;\r\n    }\r\n`\r\n\r\nconst StyledButton = styled(Button)`\r\n    width: 10rem;\r\n    @media (max-width: 650px) {\r\n        width: 8rem;\r\n    }\r\n`\r\n\r\nexport const StopWatch = React.memo(() => {\r\n\r\n    const {h, m, isGoing, ms, s, pauseStopWatch, startStopWatch, resetStopWatch} = useStopWatch()\r\n    const isAnyTime = Boolean(ms || s || m || h)\r\n\r\n    return (\r\n        <StopWatchContainer>\r\n            <Body1 style={{fontSize: '2.2rem'}} >\r\n                <FlexContainer>\r\n                    <TimeContainer>{h > 9 ? '' : '0'}{h}</TimeContainer>\r\n                    <TimeContainer>{m > 9 ? '' : '0'}{m}</TimeContainer>\r\n                    <TimeContainer>{s > 9 ? '' : '0'}{s}</TimeContainer>\r\n                    <TimeContainer>{ms > 9 ? '' : '0'}{ms}</TimeContainer>\r\n                </FlexContainer>\r\n            </Body1>\r\n            {\r\n                <FlexContainer>\r\n                    {!isGoing && <StyledButton view='success' text='Старт' onClick={startStopWatch} />}\r\n                    {isGoing && <StyledButton view='secondary' text='Пауза' onClick={pauseStopWatch} />}\r\n                    {isAnyTime && <StyledButton view='critical' text='Стоп' onClick={resetStopWatch} />}\r\n                </FlexContainer>\r\n            }\r\n        </StopWatchContainer>\r\n    )\r\n}\r\n)\r\n\r\n// export const ComponentMemo = React.memo(Component)\r\n","import { useEffect, useRef } from 'react'\r\nimport { actions } from '../store/store'\r\nimport { useStore } from './useStore'\r\n\r\n\r\nexport const useStopWatch = () => {\r\n    const [{ms, s, m, h, isGoing}, dispatch] = useStore()\r\n\r\n    const interval = useRef<NodeJS.Timeout>()\r\n    const msRef = useRef(0)\r\n    const sRef = useRef(0)\r\n    const mRef = useRef(0)\r\n    const hRef = useRef(0)\r\n\r\n    msRef.current = ms\r\n    sRef.current = s\r\n    mRef.current = m\r\n    hRef.current = h\r\n\r\n    if (ms === 100) console.log(ms)\r\n    useEffect(() => {\r\n        interval.current && clearInterval(interval.current)\r\n        if (isGoing){\r\n            interval.current = setInterval(() => {\r\n                if (msRef.current < 99) {\r\n                    dispatch(actions.setms(msRef.current + 1))\r\n                } else {\r\n                    dispatch(actions.setms(0))\r\n                    if (sRef.current < 59){\r\n                        dispatch(actions.sets(sRef.current + 1))\r\n                    } else {\r\n                        dispatch(actions.sets(0))\r\n                        if (mRef.current < 59){\r\n                            dispatch(actions.setm(mRef.current + 1))\r\n                        } else {\r\n                            dispatch(actions.setm(0))\r\n                            dispatch(actions.seth(hRef.current + 1))\r\n                        }\r\n                    }\r\n                }\r\n            }, 10)\r\n        }\r\n    }, [isGoing])\r\n\r\n    const startStopWatch = () => {\r\n        dispatch(actions.startStopWatch())\r\n    }\r\n    const pauseStopWatch = () => {\r\n        dispatch(actions.stopStopWatch())\r\n    }\r\n    const resetStopWatch = () => {\r\n        dispatch(actions.stopStopWatch())\r\n        dispatch(actions.clearTimer())\r\n    }\r\n\r\n    return {\r\n        ms,\r\n        s,\r\n        m,\r\n        h,\r\n        startStopWatch,\r\n        pauseStopWatch,\r\n        resetStopWatch,\r\n        isGoing\r\n    }\r\n}","import { Container } from '@sberdevices/plasma-ui'\nimport { AppHeader } from './components/AppHeader'\nimport { StopWatch } from './components/StopWatch'\n\nfunction App() {\n    return (\n        <Container>\n            <AppHeader />\n            <StopWatch />\n        </Container>\n    )\n}\n\nexport default App\n\n","import { createSmartappDebugger, createAssistant } from '@sberdevices/assistant-client'\r\nimport { Dispatch } from 'react'\r\nimport { actions } from '../store/store'\r\nimport { StateType } from '../types/types'\r\n\r\nexport const initializeAssistant = (getState: () => any) => {\r\n  if (process.env.NODE_ENV === 'development') {\r\n    return createSmartappDebugger({\r\n      token: process.env.REACT_APP_ASSISTANT_TOKEN ?? '',\r\n      initPhrase: 'Запусти мой секундомер',\r\n      getState\r\n    })\r\n  }\r\n  return createAssistant({ getState })\r\n}\r\n\r\nexport const initAssistant = (\r\n  dispatch: Dispatch<any>,\r\n  getState: () => StateType\r\n  ) => {\r\n  const assistant = initializeAssistant(getState)\r\n  assistant.on('data', ({ smart_app_data, type, character }: any) => {\r\n    console.log('data type', type)\r\n    if (smart_app_data) {\r\n      console.log(smart_app_data)\r\n      dispatch(smart_app_data)\r\n    }\r\n    if (type === 'character') dispatch(actions.setCharacter(character.id))\r\n  })\r\n  return assistant\r\n}","import { initializeAssistant } from './../assistant/assistant';\r\nimport React from 'react'\r\nimport { createAssistant } from '@sberdevices/assistant-client'\r\n\r\nexport const AssistantContext = React.createContext<ReturnType<typeof createAssistant>>(initializeAssistant(() => {}))","import { createAssistant } from '@sberdevices/assistant-client'\r\nimport { ReactNode, useEffect, useRef } from 'react'\r\nimport { initAssistant } from '../../assistant/assistant'\r\nimport { AssistantContext } from '../../context/assistantContext'\r\nimport { useStore } from '../../hooks/useStore'\r\nimport { StateType } from '../../types/types'\r\n\r\nexport const AssistantProvider = ({ children }: { children: ReactNode }) => {\r\n    const [state, dispatch] = useStore()\r\n    const assistantRef = useRef<ReturnType<typeof createAssistant>>()\r\n    const stateRef = useRef<StateType>(state)\r\n    stateRef.current = state\r\n    useEffect(() => {\r\n        console.log('useEffect')\r\n        assistantRef.current = initAssistant(dispatch, () => stateRef.current)\r\n    }, [])\r\n    return (\r\n        <AssistantContext.Provider value={assistantRef.current as ReturnType<typeof createAssistant>}>\r\n            {children}\r\n        </AssistantContext.Provider>\r\n    )\r\n}\r\n","import { FC, useMemo } from 'react'\r\nimport { createGlobalStyle } from 'styled-components'\r\nimport { darkSber, darkEva, darkJoy } from '@sberdevices/plasma-tokens/themes'\r\nimport {\r\n  text, // Цвет текста\r\n  background, // Цвет подложки\r\n  gradient, // Градиент\r\n} from '@sberdevices/plasma-tokens'\r\nimport { CharacterType } from '../types/types'\r\n\r\nconst themes = {\r\n  sber: createGlobalStyle(darkSber),\r\n  eva: createGlobalStyle(darkEva),\r\n  joy: createGlobalStyle(darkJoy),\r\n}\r\n\r\nconst DocumentStyle = createGlobalStyle`\r\n  html:root {\r\n    padding-top: 1rem;\r\n    min-height: 100vh;\r\n    color: ${text};\r\n    background-color: ${background};\r\n    background-image: ${gradient};\r\n  }\r\n`\r\n\r\nexport const GlobalStyles: FC<{ character: CharacterType }> = ({ character }) => {\r\n  const Theme = useMemo(() => themes[character], [character])\r\n  return (\r\n    <>\r\n      <DocumentStyle />\r\n      <Theme />\r\n    </>\r\n  )\r\n}","import { ReactNode, useReducer } from 'react'\r\nimport { StoreContext } from '../../context/storeContext'\r\nimport { initialState, reducer } from '../../store/store'\r\nimport { GlobalStyles } from '../GlobalStyle'\r\n\r\nexport const StoreProvider = ({ children }: { children: ReactNode }) => {\r\n    const [state, dispatch] = useReducer(reducer, initialState)\r\n    return <StoreContext.Provider value={[state, dispatch]}>\r\n        <GlobalStyles character={state.character} />\r\n        {children}\r\n    </StoreContext.Provider>\r\n}\r\n","import { DeviceThemeProvider } from '@sberdevices/plasma-ui'\r\nimport { ReactNode } from 'react'\r\nimport { AssistantProvider } from './AssistantProvider'\r\nimport { StoreProvider } from './StoreProvider'\r\n\r\nexport const Providers = ({ children }: { children: ReactNode }) => {\r\n    return (\r\n        <StoreProvider>\r\n            <AssistantProvider>\r\n                <DeviceThemeProvider>\r\n                    {children}\r\n                </DeviceThemeProvider>\r\n            </AssistantProvider>\r\n        </StoreProvider>\r\n    )\r\n}\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport { Providers } from './components/providers/Providers'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Providers>\n      <App />\n    </Providers>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}